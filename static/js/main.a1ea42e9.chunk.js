(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a,s=n(7),r=n.n(s),c=(n(12),n(13),n(14),n(5)),o=n.n(c),i=n(1),l=n(0),d=Object(i.memo)((function(e){var t=e.post,n=e.isPostSelected,a=e.onPostSelected;return Object(l.jsxs)("tr",{"data-cy":"Post",children:[Object(l.jsx)("td",{"data-cy":t.id,children:t.id}),Object(l.jsx)("td",{"data-cy":"PostTitle",children:t.title}),Object(l.jsx)("td",{className:"has-text-right is-vcentered",children:Object(l.jsx)("button",{type:"button","data-cy":"PostButton",className:o()("button","is-link",{"is-light":!n}),onClick:function(){return a(n?null:t)},children:n?"Close":"Open"})})]})})),u=Object(i.memo)((function(e){var t=e.posts,n=e.onPostSelected,a=e.selectedPostId,s=void 0===a?0:a;return Object(l.jsxs)("div",{"data-cy":"PostsList",children:[Object(l.jsx)("p",{className:"title",children:"Posts:"}),Object(l.jsxs)("table",{className:"table is-fullwidth is-striped is-hoverable is-narrow",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{className:"has-background-link-light",children:[Object(l.jsx)("th",{children:"#"}),Object(l.jsx)("th",{children:"Title"}),Object(l.jsx)("th",{})]})}),Object(l.jsx)("tbody",{children:t.map((function(e){var t=e.id===s;return Object(l.jsx)(d,{post:e,onPostSelected:n,isPostSelected:t},e.id)}))})]})]})})),m=(n(16),function(){return Object(l.jsx)("div",{className:"Loader","data-cy":"Loader",children:Object(l.jsx)("div",{className:"Loader__content"})})});!function(e){e.LoadUsers="Unable to load a users",e.LoadComments="Unable to load a comments",e.LoadPosts="Unable to load a posts",e.LoadAddComments="Unable to add a comment",e.InputNameError="The name must contain at least 8 symbols",e.InputEmailError="The form must contain a valid email address",e.InputBodyError="Enter some text",e.None=""}(a||(a={}));var j=Object(i.memo)((function(e){var t=e.value,n=e.error,s=e.onChange;return Object(l.jsxs)("div",{className:"field","data-cy":"NameField",children:[Object(l.jsx)("label",{className:"label",htmlFor:"comment-author-name",children:"Author Name"}),Object(l.jsxs)("div",{className:"control has-icons-left has-icons-right",children:[Object(l.jsx)("input",{type:"text",name:"name",id:"comment-author-name",placeholder:"Name Surname",className:o()("input",{"is-danger":n}),value:t,onChange:s}),Object(l.jsx)("span",{className:"icon is-small is-left",children:Object(l.jsx)("i",{className:"fas fa-user"})}),n&&Object(l.jsx)("span",{className:"icon is-small is-right has-text-danger","data-cy":"ErrorIcon",children:Object(l.jsx)("i",{className:"fas fa-exclamation-triangle"})})]}),n&&Object(l.jsx)("p",{className:"help is-danger","data-cy":"ErrorMessage",children:a.InputNameError})]})})),b=Object(i.memo)((function(e){var t=e.value,n=e.error,s=e.onChange;return Object(l.jsxs)("div",{className:"field","data-cy":"EmailField",children:[Object(l.jsx)("label",{className:"label",htmlFor:"comment-author-email",children:"Author Email"}),Object(l.jsxs)("div",{className:"control has-icons-left has-icons-right",children:[Object(l.jsx)("input",{type:"text",name:"email",id:"comment-author-email",placeholder:"email@test.com",className:o()("input",{"is-danger":n}),value:t,onChange:s}),Object(l.jsx)("span",{className:"icon is-small is-left",children:Object(l.jsx)("i",{className:"fas fa-envelope"})}),n&&Object(l.jsx)("span",{className:"icon is-small is-right has-text-danger","data-cy":"ErrorIcon",children:Object(l.jsx)("i",{className:"fas fa-exclamation-triangle"})})]}),n&&Object(l.jsx)("p",{className:"help is-danger","data-cy":"ErrorMessage",children:a.InputEmailError})]})})),h=Object(i.memo)((function(e){var t=e.value,n=e.error,s=e.onChange;return Object(l.jsxs)("div",{className:"field","data-cy":"BodyField",children:[Object(l.jsx)("label",{className:"label",htmlFor:"comment-body",children:"Comment Text"}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("textarea",{id:"comment-body",name:"body",placeholder:"Type comment here",className:o()("textarea",{"is-danger":n}),value:t,onChange:s})}),n&&Object(l.jsx)("p",{className:"help is-danger","data-cy":"ErrorMessage",children:a.InputBodyError})]})})),p=Object(i.memo)((function(e){var t=e.isLoading;return Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("button",{type:"submit",className:o()("button","is-link",{"is-loading":t}),children:"Add"})})})),O=Object(i.memo)((function(e){var t=e.isError,n=e.isFilled,a=e.onReset;return Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("button",{type:"button",className:o()("button","is-link",{"is-light":!n&&!t}),onClick:a,children:"Clear"})})})),f=n(3),x=n(4),v=n(2),N=n.n(v),y="https://mate.academy/students-api";function g(e){return new Promise((function(t){setTimeout(t,e)}))}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={method:t};return n&&(a.body=JSON.stringify(n),a.headers={"Content-Type":"application/json; charset=UTF-8"}),g(300).then((function(){return fetch(y+e,a)})).then((function(e){if(!e.ok)throw new Error;return e.json()}))}var k=function(e){return C(e)},w=function(e,t){return C(e,"POST",t)},E=function(e){return C(e,"DELETE")},S=function(){var e=Object(f.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k("/comments?postId=".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(f.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E("/comments/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(f.a)(N.a.mark((function e(t){var n,a,s,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.postId,a=t.body,s=t.email,r=t.name,e.abrupt("return",w("/comments",{postId:n,body:a,email:s,name:r}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=Object(i.memo)((function(e){var t=e.post,n=function(e){var t=e.onLoad,n=e.post,s=Object(i.useState)(""),r=Object(x.a)(s,2),c=r[0],o=r[1],l=Object(i.useState)(""),d=Object(x.a)(l,2),u=d[0],m=d[1],j=Object(i.useState)(""),b=Object(x.a)(j,2),h=b[0],p=b[1],O=Object(i.useState)(!1),v=Object(x.a)(O,2),y=v[0],g=v[1],C=Object(i.useState)(a.None),k=Object(x.a)(C,2),w=k[0],E=k[1],S=Object(i.useState)(a.None),P=Object(x.a)(S,2),I=P[0],U=P[1],F=Object(i.useState)(a.None),T=Object(x.a)(F,2),B=T[0],D=T[1],A=Object(i.useState)(a.None),V=Object(x.a)(A,2),M=V[0],_=V[1],J=c.trim(),R=u.trim(),W=h.trim(),G=J.length<8,Y=0===R.length||!R.includes("@")||!R.includes("."),q=0===W.length,z=[w,I,B],H=[J,R,W].some((function(e){return e.length>0})),K=z.some((function(e){return e.length>0})),Q=Object(i.useCallback)(function(){var e=Object(f.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(t.target.value),E(a.None);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),X=Object(i.useCallback)(function(){var e=Object(f.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(t.target.value),U(a.None);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),Z=Object(i.useCallback)(function(){var e=Object(f.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(t.target.value),D(a.None);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),$=Object(i.useCallback)(Object(f.a)(N.a.mark((function e(){var s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G&&E(a.InputNameError),Y&&U(a.InputEmailError),q&&D(a.InputBodyError),!(G||Y||q)){e.next=5;break}return e.abrupt("return");case 5:return s={postId:n.id,name:J,email:R,body:W},e.prev=6,g(!0),e.next=10,L(s);case 10:t(s.postId),o(""),m(""),p(""),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),_(a.LoadAddComments);case 19:return e.prev=19,g(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[6,16,19,22]])}))),[c,u,h]),ee=Object(i.useCallback)(function(){var e=Object(f.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,$();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,u,h]);return{name:c,body:h,email:u,isError:K,isFilled:H,isLoading:y,nameError:w,bodyError:B,resetForm:Object(i.useCallback)(Object(f.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(""),m(""),p(""),E(a.None),D(a.None),U(a.None);case 6:case"end":return e.stop()}}),e)}))),[]),emailError:I,errorLoading:M,handleSubmit:ee,handleChangeBody:Z,handleChangeName:Q,handleChangeEmail:X}}({onLoad:e.onLoad,post:t}),s=n.name,r=n.body,c=n.email,o=n.isError,d=n.isFilled,u=n.isLoading,v=n.nameError,y=n.bodyError,g=n.resetForm,C=n.emailError,k=n.errorLoading,w=n.handleSubmit,E=n.handleChangeBody,S=n.handleChangeName,P=n.handleChangeEmail;return Object(l.jsxs)("form",{"data-cy":"NewCommentForm",onSubmit:w,children:[k&&Object(l.jsx)(m,{}),Object(l.jsx)(j,{value:s,error:v,onChange:S}),Object(l.jsx)(b,{value:c,error:C,onChange:P}),Object(l.jsx)(h,{value:r,error:y,onChange:E}),Object(l.jsxs)("div",{className:"field is-grouped",children:[Object(l.jsx)(p,{isLoading:u}),Object(l.jsx)(O,{isError:o,isFilled:d,onReset:g})]})]})})),U=Object(i.memo)((function(e){var t=e.post;return Object(l.jsxs)("div",{className:"block",children:[Object(l.jsx)("h2",{"data-cy":"PostTitle",children:null===t||void 0===t?void 0:t.title}),Object(l.jsx)("p",{"data-cy":"PostBody",children:null===t||void 0===t?void 0:t.body})]})})),F=Object(i.memo)((function(e){var t=e.comment,n=e.onDeleteComment;return Object(l.jsxs)("article",{className:"message is-small","data-cy":"Comment",children:[Object(l.jsxs)("div",{className:"message-header",children:[Object(l.jsx)("a",{href:"mailto:".concat(t.email),"data-cy":"CommentAuthor",children:t.name}),Object(l.jsx)("button",{"data-cy":"CommentDelete",type:"button",className:"delete is-small","aria-label":"delete",onClick:function(){return n(t.id)},children:"delete button"})]}),Object(l.jsx)("div",{className:"message-body","data-cy":"CommentBody",children:t.body})]})})),T=Object(i.memo)((function(e){var t=e.post,n=function(e){var t=e.post,n=Object(i.useState)([]),s=Object(x.a)(n,2),r=s[0],c=s[1],o=Object(i.useState)(a.None),l=Object(x.a)(o,2),d=l[0],u=l[1],m=Object(i.useState)(!1),j=Object(x.a)(m,2),b=j[0],h=j[1],p=Object(i.useCallback)((function(){h(!0)}),[]),O=Object(i.useCallback)(function(){var e=Object(f.a)(N.a.mark((function e(n){var s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(a.LoadComments),e.prev=1,!t){e.next=8;break}return e.next=5,S(n);case 5:s=e.sent,c(s),u(a.None);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),u(a.LoadComments);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),[]),v=Object(i.useCallback)(function(){var e=Object(f.a)(N.a.mark((function e(n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P(n);case 3:O(null===t||void 0===t?void 0:t.id),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),u(a.LoadComments);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[t.id]);return Object(i.useEffect)((function(){O(t.id)}),[t.id]),{comments:r,isErrorLoading:d,isVisibleForm:b,removeComments:v,handleVisibleForm:p,loadComments:O}}({post:t}),s=n.comments,r=n.isErrorLoading,c=n.isVisibleForm,o=n.removeComments,d=n.handleVisibleForm,u=n.loadComments;return Object(l.jsx)("div",{className:"content","data-cy":"PostDetails",children:Object(l.jsxs)("div",{className:"content","data-cy":"PostDetails",children:[Object(l.jsx)(U,{post:t}),Object(l.jsxs)("div",{className:"block",children:[r&&Object(l.jsx)(m,{}),r&&Object(l.jsx)("div",{className:"notification is-danger","data-cy":"CommentsError",children:r}),!s&&Object(l.jsx)("p",{className:"title is-4","data-cy":"NoCommentsMessage",children:"No comments yet"}),Object(l.jsx)("p",{className:"title is-4",children:"Comments:"}),s.map((function(e){return Object(l.jsx)(F,{comment:e,onDeleteComment:o},e.id)})),Object(l.jsx)("button",{"data-cy":"WriteCommentButton",type:"button",className:"button is-link",onClick:d,children:"Write a comment"})]}),c&&Object(l.jsx)(I,{onLoad:u,post:t})]})})})),B=Object(i.memo)((function(e){var t=e.user,n=e.isUserSelected,a=e.onUserSelected;return Object(l.jsx)("a",{href:"#".concat(t.id),className:o()("dropdown-item",{"is-active":n}),onClick:function(){return a(t)},children:t.name})})),D=Object(i.memo)((function(e){var t=e.selectUser,n=e.selectedUserName,a=e.onVisible;return Object(l.jsx)("div",{className:"dropdown-trigger",children:Object(l.jsxs)("button",{type:"button",className:"button","aria-haspopup":"true","aria-controls":"dropdown-menu",onClick:function(){return a(!t)},children:[Object(l.jsx)("span",{children:n||"Choose a user"}),Object(l.jsx)("span",{className:"icon is-small",children:Object(l.jsx)("i",{className:"fas fa-angle-down","aria-hidden":"true"})})]})})})),A=Object(i.memo)((function(e){var t=e.users,n=e.onSelect,a=Object(i.useState)("Choose a user"),s=Object(x.a)(a,2),r=s[0],c=s[1],d=Object(i.useState)(!1),u=Object(x.a)(d,2),m=u[0],j=u[1],b=function(e){n(e),j(!1),c(e.name)};return Object(l.jsxs)("div",{"data-cy":"UserSelector",className:o()("dropdown",{"is-active":m}),children:[Object(l.jsx)(D,{selectUser:m,selectedUserName:r,onVisible:function(e){j(e)}}),Object(l.jsx)("div",{className:"dropdown-menu",id:"dropdown-menu",role:"menu",children:Object(l.jsx)("div",{className:"dropdown-content",children:t.map((function(e){var t=e.name===r;return Object(l.jsx)(B,{user:e,onUserSelected:b,isUserSelected:t},e.id)}))})})]})})),V=Object(i.memo)((function(e){var t=e.error;return Object(l.jsxs)("div",{children:[Object(l.jsx)(m,{}),Object(l.jsx)("div",{className:"notification is-danger","data-cy":"PostsLoadingError",children:t})]})})),M=function(){var e=Object(f.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k("/users"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(f.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k("/posts?userId=".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=function(){var e=Object(i.useState)([]),t=Object(x.a)(e,2),n=t[0],s=t[1],r=Object(i.useState)([]),c=Object(x.a)(r,2),o=c[0],l=c[1],d=Object(i.useState)(a.None),u=Object(x.a)(d,2),m=u[0],j=u[1],b=Object(i.useState)(null),h=Object(x.a)(b,2),p=h[0],O=h[1],v=Object(i.useState)(null),y=Object(x.a)(v,2),g=y[0],C=y[1],k=0!==n.length,w=Object(i.useCallback)(Object(f.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M();case 3:t=e.sent,l(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),j(a.LoadUsers);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]),E=Object(i.useCallback)(function(){var e=Object(f.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_(t);case 3:n=e.sent,s(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),j(a.LoadPosts);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[]),S=Object(i.useCallback)(function(){var e=Object(f.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(i.useEffect)((function(){w()}),[]),Object(i.useEffect)((function(){O(null),g?E(g.id):s([])}),[null===g||void 0===g?void 0:g.id]),{posts:n,users:o,error:m,isPosts:k,selectedUser:g,selectedPost:p,selectingPost:S,setSelectedPost:O}}(),t=e.posts,n=e.users,s=e.error,r=e.isPosts,c=e.selectedPost,d=e.selectedUser,m=e.selectingPost,j=e.setSelectedPost;return Object(l.jsx)("main",{className:"section",children:Object(l.jsx)("div",{className:"container",children:Object(l.jsxs)("div",{className:"tile is-ancestor",children:[Object(l.jsx)("div",{className:"tile is-parent",children:Object(l.jsxs)("div",{className:"tile is-child box is-success",children:[Object(l.jsx)("div",{className:"block",children:Object(l.jsx)(A,{users:n,onSelect:m})}),Object(l.jsxs)("div",{className:"block","data-cy":"MainContent",children:[!n&&Object(l.jsx)("p",{"data-cy":"NoSelectedUser",children:"No user selected"}),s&&Object(l.jsx)(V,{error:s}),!r&&d&&Object(l.jsx)("div",{className:"notification is-warning","data-cy":"NoPostsYet",children:"No posts yet"}),r&&Object(l.jsx)(u,{posts:t,onPostSelected:j,selectedPostId:null===c||void 0===c?void 0:c.id})]})]})}),Object(l.jsx)("div",{"data-cy":"Sidebar",className:o()("tile","is-parent","is-8-desktop","Sidebar",{"Sidebar--open":c}),children:Object(l.jsx)("div",{className:"tile is-child box is-success",children:c&&Object(l.jsx)(T,{post:c})})})]})})})};r.a.render(Object(l.jsx)(J,{}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.a1ea42e9.chunk.js.map